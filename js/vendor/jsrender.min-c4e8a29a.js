!function(t,e,n){"use strict";function r(t,e){for(var n in e.props)oe.test(n)&&(t[n]=e.props[n])}function a(t){return t}function i(t){return t}function s(t){ye._dbgMode=t,Q=t?"Unavailable (nested view): use #getIndex()":"",_e("dbg",xe.dbg=we.dbg=t?i:a)}function o(t){this.name=(L.link?"JsViews":"JsRender")+" Error",this.message=t||this.name}function u(t,e){for(var n in e)t[n]=e[n];return t}function p(t){return"function"==typeof t}function l(t,e,n){return(!be.rTag||t)&&(Z=t?t.charAt(0):Z,z=t?t.charAt(1):z,G=e?e.charAt(0):G,P=e?e.charAt(1):P,W=n||W,t="\\"+Z+"(\\"+W+")?\\"+z,e="\\"+G+"\\"+P,D="(?:(?:(\\w+(?=[\\/\\s\\"+G+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+G+"]|\\"+G+"(?!\\"+P+"))*?)",be.rTag=D+")",D=new RegExp(t+D+"(\\/)?|(?:\\/(\\w+)))"+e,"g"),H=new RegExp("<.*>|([^\\\\]|^)[{}]|"+t+".*"+e)),[Z,z,G,P,W]}function c(t,e){e||(e=t,t=n);var r,a,i,s,o=this,u=!e||"root"===e;if(t){if(s=o.type===e?o:n,!s)if(r=o.views,o._.useKey){for(a in r)if(s=r[a].get(t,e))break}else for(a=0,i=r.length;!s&&i>a;a++)s=r[a].get(t,e)}else if(u)for(;o.parent.parent;)s=o=o.parent;else for(;o&&!s;)s=o.type===e?o:n,o=o.parent;return s}function g(){var t=this.get("item");return t?t.index:n}function d(){return this.index}function f(e){var r,a=this,i=a.linkCtx,s=(a.ctx||{})[e];return s===n&&i&&i.ctx&&(s=i.ctx[e]),s===n&&(s=xe[e]),s&&p(s)&&!s._wrp&&(r=function(){return s.apply(this&&this!==t?this:a,arguments)},r._wrp=!0,u(r,s)),r||s}function m(t,e,a,i){var s,o,u=+a===a&&e.tmpl.bnds[a-1],p=e.linkCtx;return i=i!==n&&{props:{},args:[i]},a=i||(u?u(e.data,e,ve):a),o=a.args[0],(t||u)&&(s=p&&p.tag,s||(s={_:{inline:!p,bnd:u},tagName:":",cvt:t,flow:!0,tagCtx:a,_is:"tag"},p&&(p.tag=s,s.linkCtx=p,a.ctx=J(a.ctx,p.view.ctx)),be._lnk(s)),s._er=i&&o,r(s,a),a.view=e,s.ctx=a.ctx||{},delete a.ctx,e._.tag=s,o=v(s,s.convert||"true"!==t&&t)[0],o=u&&e._.onRender?e._.onRender(o,e,u):o,e._.tag=n),o!=n?o:""}function v(t,e){var n=t.tagCtx,r=n.view,a=n.args;return e=e&&(""+e===e?r.getRsc("converters",e)||$("Unknown converter: '"+e+"'"):e),a=a.length||n.index?e?a.slice():a:[r.data],e&&(e.depends&&(t.depends=be.getDeps(t.depends,t,e.depends,e)),a[0]=e.apply(t,a)),a}function h(t,e){for(var r,a,i=this;r===n&&i;)a=i.tmpl[t],r=a&&a[e],i=i.parent;return r||ve[t][e]}function w(t,e,a,i,s,o){var p,l,c,g,d,f,m,h,w,x,_,b,y,k,C,j,T,A="",R=e.linkCtx||0,N=e.ctx,E=a||e.tmpl,S=+i===i&&E.bnds[i-1];for("tag"===t._is&&(p=t,t=p.tagName,i=p.tagCtxs),p=p||R.tag,o=o!==n&&(A+=o,[{props:{},args:[]}]),i=o||(S?S(e.data,e,ve):i),f=i.length,d=0;f>d;d++)d||a&&p||(_=e.getRsc("tags",t)||$("Unknown tag: {{"+t+"}}")),h=i[d],(!R.tag||p._er)&&(x=h.tmpl,x=h.content=x&&E.tmpls[x-1],u(h,{tmpl:(p?p:_).template||x,render:M,index:d,view:e,ctx:J(h.ctx,N)})),(a=h.props.tmpl)&&(a=""+a===a?e.getRsc("templates",a)||he(a):a,h.tmpl=a),p||(_._ctr?(p=new _._ctr,b=!!p.init):be._lnk(p={render:_.render}),p._={inline:!R},R&&(R.tag=p,p.linkCtx=R),(p._.bnd=S||R.fn)?p._.arrVws={}:p.dataBoundOnly&&$("{^{"+t+"}} tag must be data-bound"),p.tagName=t,p.parent=g=N&&N.tag,p._is="tag",p._def=_,p.tagCtxs=i),h.tag=p,p.dataMap&&p.tagCtxs&&(h.map=p.tagCtxs[d].map),p.flow||(w=h.ctx=h.ctx||{},l=p.parents=w.parentTags=N&&J(w.parentTags,N.parentTags)||{},g&&(l[g.tagName]=g),l[p.tagName]=w.tag=p);if(e._.tag=p,!(p._er=o)){for(r(p,i[0]),p.rendering={},d=0;f>d;d++)h=p.tagCtx=p.tagCtxs[d],j=h.props,C=v(p,p.convert),(y=j.dataMap||p.dataMap)&&(C.length||j.dataMap)&&(k=h.map,(!k||k.src!==C[0]||s)&&(k&&k.src&&k.unmap(),k=h.map=y.map(C[0],j)),C=[k.tgt]),p.ctx=h.ctx,!d&&b&&(T=p.template,p.init(h,R,p.ctx),b=n,p.template!==T&&(p._.tmpl=p.template),R&&(R.attr=p.attr=R.attr||p.attr)),m=n,p.render&&(m=p.render.apply(p,C)),C=C.length?C:[e],m=m!==n?m:h.render(C[0],!0)||(s?n:""),A=A?A+(m||""):m;delete p.rendering}return p.tagCtx=p.tagCtxs[0],p.ctx=p.tagCtx.ctx,p._.inline&&(c=p.attr)&&c!==ge&&(A="text"===c?we.html(A):""),S&&e._.onRender?e._.onRender(A,e,S):A}function x(t,e,n,r,a,i,s,o){var u,p,l,c=this,d="array"===e,f={key:0,useKey:d?0:1,id:""+le++,onRender:o,bnds:{}};c.data=r,c.tmpl=a,c.content=s,c.views=d?[]:{},c.parent=n,c.type=e||"top",c._=f,c.linked=!!o,n?(u=n.views,p=n._,p.useKey?(u[f.key="_"+p.useKey++]=c,c.index=Q,c.getIndex=g,l=p.tag,f.bnd=d&&(!l||!!l._.bnd&&l)):u.splice(f.key=c.index=i,0,c),c.ctx=t||n.ctx):c.ctx=t}function _(t){var e,n,r,a,i,s,o;for(e in me)if(i=me[e],(s=i.compile)&&(n=t[e+"s"]))for(r in n)a=n[r]=s(r,n[r],t),a&&(o=be.onStore[e])&&o(r,a,s)}function b(t,e,r){var a,i;return p(e)?e={depends:e.depends,render:e}:(e.baseTag&&(e.flow=!!e.flow,e=u(u({},e.baseTag),e)),(i=e.template)!==n&&(e.template=""+i===i?he[i]||he(i):i),e.init!==!1&&(a=e._ctr=function(){},(a.prototype=e).constructor=a)),r&&(e._parentTmpl=r),e}function y(r,a,i,s){function o(a){if(""+a===a||a.nodeType>0){try{p=a.nodeType>0?a:!H.test(a)&&e&&e(t.document).find(a)[0]}catch(o){}return p&&(a=he[r=r||p.getAttribute(de)],a||(r=r||"_"+pe++,p.setAttribute(de,r),a=he[r]=y(r,p.innerHTML,i,s)),p=n),a}}var u,p;return a=a||"",u=o(a),s=s||(a.markup?a:{}),s.tmplName=r,i&&(s._parentTmpl=i),!u&&a.markup&&(u=o(a.markup))&&u.fn&&(u.debug!==a.debug||u.allowCode!==a.allowCode)&&(u=u.markup),u!==n?(r&&!i&&(fe[r]=function(){return a.render.apply(a,arguments)}),u.fn||a.fn?u.fn&&(a=r&&r!==u.tmplName?J(s,u):u):(a=C(u,s),E(u.replace(ne,"\\$&"),a)),_(s),a):void 0}function k(t){function e(e,n){this.tgt=t.getTgt(e,n)}return p(t)&&(t={getTgt:t}),t.baseMap&&(t=u(u({},t.baseMap),t)),t.map=function(t,n){return new e(t,n)},t}function C(t,e){var n,r=ye.wrapMap||{},a=u({markup:t,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:R},e);return e.htmlTag||(n=ie.exec(t),a.htmlTag=n?n[1].toLowerCase():""),n=r[a.htmlTag],n&&n!==r.div&&(a.markup=L.trim(a.markup)),a}function j(t,e){function r(i,s,o){var u,p,l,c;if(i&&"object"==typeof i&&!i.nodeType&&!i.markup&&!i.getTgt){for(l in i)r(l,i[l],s);return ve}return s===n&&(s=i,i=n),i&&""+i!==i&&(o=s,s=i,i=n),c=o?o[a]=o[a]||{}:r,p=e.compile,null===s?i&&delete c[i]:(s=p?s=p(i,s,o):s,i&&(c[i]=s)),p&&s&&(s._is=t),s&&(u=be.onStore[t])&&u(i,s,p),s}var a=t+"s";ve[a]=r,me[t]=e}function T(t,e,n){var r=this.jquery&&(this[0]||$('Unknown template: "'+this.selector+'"')),a=r.getAttribute(de);return R.call(a?he[a]:he(r),t,e,n)}function A(t,e,n){if(ye._dbgMode)try{return t.fn(e,n,ve)}catch(r){return $(r,n)}return t.fn(e,n,ve)}function R(t,e,n,r,a,i){var s=this;return r||!s.fn._nvw||L.isArray(t)?M.call(s,t,e,n,r,a,i):A(s,t,{tmpl:s})}function M(t,e,r,a,i,s){var o,u,p,l,c,g,d,f,m,v,h,w,_,b,y=this,k="";if(!!e===e&&(r=e,e=n),i===!0&&(d=!0,i=0),y.tag?(f=y,y=y.tag,v=y._,w=y.tagName,_=v.tmpl||f.tmpl,b=y.attr&&y.attr!==ge,e=J(e,y.ctx),m=f.content,f.props.link===!1&&(e=e||{},e.link=!1),a=a||f.view,t=arguments.length?t:a):_=y,_&&(!a&&t&&"view"===t._is&&(a=t),a&&(m=m||a.content,s=s||a._.onRender,t===a&&(t=a.data),e=J(e,a.ctx)),a&&"top"!==a.type||((e=e||{}).root=t),_.fn||(_=he[_]||he(_)),_)){if(s=(e&&e.link)!==!1&&!b&&s,h=s,s===!0&&(h=n,s=a._.onRender),e=_.helpers?J(_.helpers,e):e,L.isArray(t)&&!r)for(l=d?a:i!==n&&a||new x(e,"array",a,t,_,i,m,s),o=0,u=t.length;u>o;o++)p=t[o],c=new x(e,"item",l,p,_,(i||0)+o,m,s),g=A(_,p,c),k+=l._.onRender?l._.onRender(g,c):g;else(a||!_.fn._nvw)&&(l=d?a:new x(e,w||"data",a,t,_,i,m,s),v&&!y.flow&&(l.tag=y)),k+=A(_,t,l);return h?h(k,l):k}return""}function $(t,e,n){var r=ye.onError(t,e,n);if(""+t===t)throw new be.Err(r);return!e.linkCtx&&e.linked?we.html(r):r}function N(t){$("Syntax error\n"+t)}function E(t,e,n,r){function a(e){e-=g,e&&f.push(t.substr(g,e).replace(te,"\\n"))}function i(e){e&&N('Unmatched or missing tag: "{{/'+e+'}}" in template:\n'+t)}function s(s,o,c,v,h,w,x,_,b,y,k,C){w&&(h=":",v=ge),y=y||n;var j=(o||n)&&[[]],T="",A="",R="",M="",$="",E="",S="",O="",I=!y&&!h&&!x;c=c||(b=b||"#data",h),a(C),g=C+s.length,_?l&&f.push(["*","\n"+b.replace(ee,"$1")+"\n"]):c?("else"===c&&(ae.test(b)&&N('for "{{else if expr}}" use "{{else expr}}"'),j=m[7],m[8]=t.substring(m[8],C),m=d.pop(),f=m[2],I=!0),b&&(F(b.replace(te," "),j,e).replace(re,function(t,e,n,r,a,i,s,o){return s?(A+=i+",",M+="'"+o+"',"):n?(R+=r+i+",",E+=r+"'"+o+"',"):e?S+=i:("trigger"===a&&(O+=i),T+=r+i+",",$+=r+"'"+o+"',",p=p||oe.test(a)),""}).slice(0,-1),j&&j[0]&&j.pop()),u=[c,v||!!r||p||"",I&&[],U(M,$,E),U(A,T,R),S,O,j||0],f.push(u),I&&(d.push(m),m=u,m[8]=g)):k&&(i(k!==m[0]&&"else"!==m[0]&&k),m[8]=t.substring(m[8],C),m=d.pop()),i(!m&&k),f=m[2]}var o,u,p,l=e&&e.allowCode,c=[],g=0,d=[],f=c,m=[,,c];return n&&(t=Z+t+P),i(d[0]&&d[0][2].pop()[0]),t.replace(D,s),a(t.length),(g=c[c.length-1])&&i(""+g!==g&&+g[8]===g[8]&&g[0]),n?(o=I(c,t,n),S(o,c[0][7])):o=I(c,e),o._nvw&&(o._nvw=!/[~#]/.test(t)),o}function S(t,e){t.deps=[];for(var n in e)"_jsvto"!==n&&e[n].length&&(t.deps=t.deps.concat(e[n]));t.paths=e}function U(t,e,n){return[t.slice(0,-1),e.slice(0,-1),n.slice(0,-1)]}function O(t,e){return"\n	"+(e?e+":{":"")+"args:["+t[0]+"]"+(t[1]||!e?",\n	props:{"+t[1]+"}":"")+(t[2]?",\n	ctx:{"+t[2]+"}":"")}function F(t,e,n){function r(r,m,v,h,w,x,_,b,y,k,C,j,T,A,R,M,$,S,U,O){function F(t,n,r,o,u,l,c,g){if(r&&(p&&("linkTo"===a&&(i=e._jsvto=e._jsvto||[],i.push(w)),(!a||s)&&p.push(w.slice(n.length))),"."!==r)){var d=(o?'view.hlp("'+o+'")':u?"view":"data")+(g?(l?"."+l:o?"":u?"":"."+r)+(c||""):(g=o?"":u?l||"":r,""));return d+=g?"."+g:"",n+("view.data"===d.slice(0,9)?d.slice(5):d)}return t}x=x||"",v=v||m||j,w=w||y,k=k||$||"";var I,J,K,V=O.length-1;return!_||u||o?(p&&M&&!u&&!o&&(!a||s||i)&&(I=d[f],V>U-I&&(I=O.slice(I,U+1),M=z+":"+I+" onerror=''"+G,K=c[M],K||(c[M]=!0,c[M]=K=E(M,n||p,!0),K.paths.push({_jsvOb:K})),K!==!0&&(i||p).push({_jsvOb:K}))),u?(u=!T,u?r:'"'):o?(o=!A,o?r:'"'):(v?(f++,d[f]=U++,v):"")+(S?f?"":(l=O.slice(l,U),(a?(a=s=i=!1,"\b"):"\b,")+l+(l=U+r.length,p&&e.push(p=[]),"\b")):b?(f&&N(t),p&&e.pop(),a=w,s=h,l=U+r.length,h&&(p=e[a]=[]),w+":"):w?w.split("^").join(".").replace(X,F)+(k?(g[++f]=!0,"."!==w.charAt(0)&&(d[f]=U),J?"":k):x):x?x:R?(g[f--]=!1,R+(k?(g[++f]=!0,k):"")):C?(g[f]||N(t),","):m?"":(u=T,o=A,'"'))):void N(t)}var a,i,s,o,u,p=e&&e[0],l=0,c=n?n.links:p&&(p.links=p.links||{}),g={},d={0:-1},f=0;return(t+(n?" ":"")).replace(/\)\^/g,").").replace(Y,r)}function I(t,e,r){var a,i,s,o,u,p,l,c,g,d,f,m,v,h,w,x,_,b,y,k,j,T,A,R,M,$,E,U,F,J,K,V=0,B="",L={},q=t.length;for(""+e===e?(y=r?'data-link="'+e.replace(te," ").slice(1,-1)+'"':e,e=0):(y=e.tmplName||"unnamed",e.allowCode&&(L.allowCode=!0),e.debug&&(L.debug=!0),m=e.bnds,b=e.tmpls),a=0;q>a;a++)if(i=t[a],""+i===i)B+='\n+"'+i+'"';else if(s=i[0],"*"===s)B+=";\n"+i[1]+"\nret=ret";else{if(o=i[1],T=i[2],u=O(i[3],"params")+"},"+O(h=i[4]),F=i[5],K=i[6],A=i[8],($="else"===s)||(V=0,m&&(v=i[7])&&(V=m.push(v))),(E=":"===s)?o&&(s=o===ge?">":o+s):(T&&(k=C(A,L),k.tmplName=y+"/"+s,I(T,k),b.push(k)),$||(j=s,M=B,B=""),R=t[a+1],R=R&&"else"===R[0]),J=F?";\ntry{\nret+=":"\n+",w="",x="",E&&(v||K||o&&o!==ge)){if(U="return {"+u+"};",_='c("'+o+'",view,',U=new Function("data,view,j,u"," // "+y+" "+V+" "+s+"\n"+U),U._er=F,w=_+V+",",x=")",U._tag=s,r)return U;S(U,v),f=!0}if(B+=E?(r?(F?"\ntry{\n":"")+"return ":J)+(f?(f=n,d=g=!0,_+(v?(m[V-1]=U,V):"{"+u+"}")+")"):">"===s?(l=!0,"h("+h[0]+")"):(c=!0,"((v="+h[0]+')!=null?v:"")')):(d=p=!0,"\n{view:view,tmpl:"+(T?b.length:"0")+","+u+"},"),j&&!R){if(B="["+B.slice(0,-1)+"]",_='t("'+j+'",view,this,',r||v){if(B=new Function("data,view,j,u"," // "+y+" "+V+" "+j+"\nreturn "+B+";"),B._er=F,B._tag=s,v&&S(m[V-1]=B,v),r)return B;w=_+V+",undefined,",x=")"}B=M+J+_+(V||B)+")",v=0,j=0}F&&(d=!0,B+=";\n}catch(e){ret"+(r?"urn ":"+=")+w+"j._err(e,view,"+F+")"+x+";}\n"+(r?"":"ret=ret"))}B="// "+y+"\nvar v"+(p?",t=j._tag":"")+(g?",c=j._cnvt":"")+(l?",h=j.converters.html":"")+(r?";\n":',ret=""\n')+(L.debug?"debugger;":"")+B+(r?"\n":";\nreturn ret;");try{B=new Function("data,view,j,u",B)}catch(D){N("Compiled template code:\n\n"+B+'\n: "'+D.message+'"')}return e&&(e.fn=B),d||(B._nvw=!0),B}function J(t,e){return t&&t!==e?e?u(u({},e),t):t:e&&u({},e)}function K(t){return ce[t]||(ce[t]="&#"+t.charCodeAt(0)+";")}function V(t){var e,n,r=[];if("object"==typeof t)for(e in t)n=t[e],n&&n.toJSON&&!n.toJSON()||p(n)||r.push({key:e,prop:n});return r}function B(t){return null!=t?se.test(t)&&(""+t).replace(ue,K)||t:""}if(!(e&&e.render||t.jsviews)){var L,q,D,H,Q,Z="{",z="{",G="}",P="}",W="^",X=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,Y=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^|\s*$)|[)\]])([([]?))|(\s+)/g,te=/[ \t]*(\r\n|\n|\r)/g,ee=/\\(['"])/g,ne=/['"\\]/g,re=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,ae=/^if\s/,ie=/<(\w+)[>\s]/,se=/[\x00`><\"'&]/,oe=/^on[A-Z]|^convert(Back)?$/,ue=/[\x00`><"'&]/g,pe=0,le=0,ce={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},ge="html",de="data-jsv-tmpl",fe={},me={template:{compile:y},tag:{compile:b},helper:{},converter:{}},ve={jsviews:"v1.0.0-beta",settings:function(t){u(ye,t),s(ye._dbgMode),ye.jsv&&ye.jsv()},sub:{View:x,Err:o,tmplFn:E,cvt:v,parse:F,extend:u,syntaxErr:N,onStore:{},_lnk:a,_ths:r},map:k,_cnvt:m,_tag:w,_err:$};(o.prototype=new Error).constructor=o,g.depends=function(){return[this.get("item"),"index"]},d.depends=function(){return["index"]},x.prototype={get:c,getIndex:d,getRsc:h,hlp:f,_is:"view"};for(q in me)j(q,me[q]);var he=ve.templates,we=ve.converters,xe=ve.helpers,_e=ve.tags,be=ve.sub,ye=ve.settings;e?(L=e,L.fn.render=T,L.observable&&(u(be,L.views.sub),ve.map=L.views.map)):(L=t.jsviews={},L.isArray=Array&&Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}),L.render=fe,L.views=ve,L.templates=he=ve.templates,ye({debugMode:s,delimiters:l,onError:function(t,e,r){return e&&(t=r===n?"{Error: "+t+"}":p(r)?r(t,e):r),t==n?"":t},_dbgMode:!0}),_e({"else":function(){},"if":{render:function(t){var e=this;return e.rendering.done||!t&&(arguments.length||!e.tagCtx.index)?"":(e.rendering.done=!0,e.selected=e.tagCtx.index,e.tagCtx.render(e.tagCtx.view,!0))},onUpdate:function(t,e,n){for(var r,a,i=0;(r=this.tagCtxs[i])&&r.args.length;i++)if(r=r.args[0],a=!r!=!n[i].args[0],!this.convert&&!!r||a)return a;return!1},flow:!0},"for":{render:function(t){var e,r=this,a=r.tagCtx,i="",s=0;return r.rendering.done||((e=!arguments.length)&&(t=a.view.data),t!==n&&(i+=a.render(t,e),s+=L.isArray(t)?t.length:1),(r.rendering.done=s)&&(r.selected=a.index)),i},flow:!0},include:{flow:!0},"*":{render:a,flow:!0}}),_e("props",{baseTag:_e["for"],dataMap:k(V)}),we({html:B,attr:B,url:function(t){return t!=n?encodeURI(""+t):null===t?t:""}}),l()}}(this,this.jQuery);